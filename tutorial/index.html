
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://monarch-initiative.github.io/automaxo/tutorial/">
      
      
        <link rel="prev" href="../install/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Tutorial - AutoMAxO</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="white">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automaxo-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="AutoMAxO" class="md-header__button md-logo" aria-label="AutoMAxO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AutoMAxO
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="white"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/monarch-initiative/automaxo/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../install/" class="md-tabs__link">
        
  
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Tutorial

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AutoMAxO" class="md-nav__button md-logo" aria-label="AutoMAxO" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AutoMAxO
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/monarch-initiative/automaxo/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      Note:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-extract-mesh-sets-from-target-mesh-ids" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Extract MeSH Sets from Target MeSH IDs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-retrieve-mesh-ids" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Retrieve MeSH IDs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-pre-process-extracted-data-from-json-files" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Pre-process Extracted Data from JSON Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-integrate-ontogpt" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Integrate OntoGPT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-post-process-llm-results" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Post-process LLM Results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-validate-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Validate Annotations
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="automaxo-tutorial">AutoMAxO Tutorial</h1>
<p>Welcome to the AutoMAxO tutorial. This guide will walk you through running the AutoMAxO project step by step.</p>
<h3 id="note">Note:</h3>
<p>There are two options to run the whole AutoMAxO pipeline depending on your usage:
1. You can run the entire project with just one command if you would like to retrieve a certain number of articles that discuss therapeutics and extract medical actions.</p>
<p><div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>--disease_name<span class="w"> </span><span class="s2">&quot;YourDiseaseName&quot;</span><span class="w"> </span>--max_articles_to_save<span class="w"> </span><span class="m">100</span>
</code></pre></div>
Replace "YourDiseaseName" with the name of the disease you want to process and adjust <code>100</code> to the desired number of articles to save.</p>
<ol>
<li>You can run each file separately to easily modify and integrate AutoMAxO into different applications to accomplish various tasks. In this tutorial, we will be using "sickle cell" as a sample disease, but you can change it to any name you prefer. Follow the step-by-step instructions below:</li>
</ol>
<h2 id="step-1-extract-mesh-sets-from-target-mesh-ids">Step 1: Extract MeSH Sets from Target MeSH IDs</h2>
<p>The script, <code>mesh_importer.py</code>, reads a list of targeted MeSH IDs and their labels to create a formatted file with MeSH sets required for the AutoMAxO project.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>--input-file</td>
<td>Path to the .tsv file containing MeSH target IDs</td>
</tr>
<tr>
<td>--output-file</td>
<td>Path to the output .tsv file with MeSH sets</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<p><div class="highlight"><pre><span></span><code>python<span class="w"> </span>mesh_importer.py<span class="w"> </span>--input-file<span class="w"> </span>path/to/mesh_target_ids.tsv<span class="w"> </span>--output-file<span class="w"> </span>path/to/mesh_sets.tsv
</code></pre></div>
The default format for <code>mesh_target_ids</code> in the project is as follows:</p>
<table>
<thead>
<tr>
<th>mesh.id</th>
<th>label</th>
</tr>
</thead>
<tbody>
<tr>
<td>D013812</td>
<td>Therapeutics</td>
</tr>
</tbody>
</table>
<p>Sample output for <code>mesh_sets</code>:</p>
<table>
<thead>
<tr>
<th>label</th>
<th>mesh.id</th>
<th>mesh set</th>
</tr>
</thead>
<tbody>
<tr>
<td>Therapeutics</td>
<td>D013812</td>
<td>061645;D000075162;D000161;D000203;D019050</td>
</tr>
</tbody>
</table>
<h2 id="step-2-retrieve-mesh-ids">Step 2: Retrieve MeSH IDs</h2>
<p>The script, <code>pubmed_article_fetcher.py</code>,start by retrieving raw data and MeSH IDs related to the treatment of your specified disease. In this stage, the script first checks whether there are already existing articles in the directory to avoid duplicate extraction. It ensures that the new articles being extracted are not the same as the ones already existing in the directory, and attempts to extract up to the maximum number specified by the user.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>Disease name</td>
</tr>
<tr>
<td>-m</td>
<td>Path to the .tsv file with MeSH sets created in Step 1</td>
</tr>
<tr>
<td>-o</td>
<td>Directory where retrieved articles will be saved in the form of .json files</td>
</tr>
<tr>
<td>-j</td>
<td>Path to the .json file to save MeSH IDs related to retrieved articles</td>
</tr>
<tr>
<td>-n</td>
<td>Maximum number of articles to retrieve</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>pubmed_article_fetcher.py<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;sickle cell&quot;</span><span class="w"> </span>-m<span class="w"> </span>../../data/mesh_sets.tsv<span class="w"> </span>-o<span class="w"> </span>../../data/sickle_cell/pubtator3_json/<span class="w"> </span>-j<span class="w"> </span>../../data/sickle_cell/selected_pmid_mesh_info.json<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span>
</code></pre></div>
<p>Note:
* The disease name is not case-sensitive.
* The maximum number of articles will include articles both about a specific disease and having at least one of the MeSH IDs in the MeSH sets from Step 1, meaning articles about therapeutics of a specific disease, for example, in our use case.</p>
<h2 id="step-3-pre-process-extracted-data-from-json-files">Step 3: Pre-process Extracted Data from JSON Files</h2>
<p>The script, <code>article_data_extractor.py</code>, extracts data from JSON files and saves the text where each row represents the title and abstract of an article.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>Directory containing JSON files produced in Step 2</td>
</tr>
<tr>
<td>-n</td>
<td>Path to the .tsv file for pre-processed text data</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<p><div class="highlight"><pre><span></span><code>python<span class="w"> </span>article_data_extractor.py<span class="w"> </span>-i<span class="w"> </span>../../data/sickle_cell/pubtator3_json/<span class="w"> </span>-n<span class="w"> </span>../../data/sickle_cell/sickle_cell_no_replaced.tsv
</code></pre></div>
If you would like to extract annotations from custom texts, including full PubMed Central texts, websites, or other text collections, you need to format your text into a TSV (Tab-Separated Values) file. This file must contain three columns: PMID, Title, and Abstract. The PMID column can be left empty or populated with unique identifiers if available. The format should match the output format required by the processing function.</p>
<table>
<thead>
<tr>
<th>PMID</th>
<th>Title</th>
<th>Abstract</th>
</tr>
</thead>
<tbody>
<tr>
<td>28669521</td>
<td>Management of delayed hemolytic transfusion reaction ...</td>
<td>Transfusion remains a key treatment of sickle cell disease...</td>
</tr>
</tbody>
</table>
<h2 id="step-4-integrate-ontogpt">Step 4: Integrate OntoGPT</h2>
<p>The script, <code>ontogpt_article_processor.py</code>, processes the text data from the pre-processed .tsv file using OntoGPT. Each row in the .tsv file is treated as an input text for OntoGPT. For more information about OntoGPT, please refer to <a href="https://github.com/monarch-initiative/ontogpt" target="_blank">this repo</a>. </p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>Path to the .tsv file for pre-processed text produced in Step 3</td>
</tr>
<tr>
<td>-o</td>
<td>Directory containing YAML files produced by LLMs (OntoGPT)</td>
</tr>
<tr>
<td>-template</td>
<td>Name of the template for OntoGPT (default = 'maxo')</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>ontogpt_article_processor.py<span class="w"> </span>-i<span class="w"> </span>../../data/sickle_cell/sickle_cell_no_replaced.tsv<span class="w"> </span>-o<span class="w"> </span>../../data/sickle_cell/ontoGPT_yaml/
</code></pre></div>
<h2 id="step-5-post-process-llm-results">Step 5: Post-process LLM Results</h2>
<p>The script, <code>ontology_validation.py</code>, 
Post-process LLM results from separate YAML files into a single JSON file. This includes further grounding of terms to the existing ontologies and ranking extracted triplets by frequency of appearance.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>Directory containing YAML files produced in Step 4</td>
</tr>
<tr>
<td>-s</td>
<td>Path to the .json file to save MeSH IDs related to retrieved articles produced in Step 2</td>
</tr>
<tr>
<td>-n</td>
<td>Path to the .tsv file for pre-processed text produced in Step 3</td>
</tr>
<tr>
<td>-o</td>
<td>Path to the .json file to save post-processed LLM results in one file</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>triplet_ranking_and_mesh_combiner.py<span class="w"> </span>-i<span class="w"> </span>../../data/sickle_cell/ontoGPT_yaml/<span class="w"> </span>-s<span class="w"> </span>../../data/sickle_cell/selected_pmid_mesh_info.json<span class="w"> </span>-n<span class="w"> </span>../../data/sickle_cell/sickle_cell_no_replaced.tsv<span class="w"> </span>-o<span class="w"> </span>../../data/sickle_cell/detailed_post_ontoGPT.json
</code></pre></div>
<h2 id="step-6-validate-annotations">Step 6: Validate Annotations</h2>
<p>The script, <code>ontology_validation.py</code>, updates ontology labels in a JSON file by validating and augmenting MAXO, HPO, and MONDO IDs with their corresponding labels. It processes the JSON data, generates ontology term files using <code>runoak</code>, and integrates these terms into the JSON file to enhance the dataset with accurate ontology information.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-json_file_path</td>
<td>Path to the .json file of post-processed LLM results produced in Step 5</td>
</tr>
<tr>
<td>-output_file_path</td>
<td>Path to the .json file, final result of validated ontologies produced by automaxo</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>ontology_validation.py<span class="w"> </span>../../data/sickle_cell/detailed_post_ontoGPT.json<span class="w"> </span>../../data/sickle_cell/final_automaxo_results.json
</code></pre></div>
<h1 id="running-the-script">Running the Script</h1>
<p>You can run the script using the following command:</p>
<p><div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>--disease_name<span class="w"> </span><span class="s2">&quot;YourDiseaseName&quot;</span><span class="w"> </span>--max_articles_to_save<span class="w"> </span><span class="m">100</span>
</code></pre></div>
Replace "YourDiseaseName" with the name of the disease you want to process and adjust <code>100</code> to the desired number of articles to save.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/pnrobinson"  target="_blank" rel="noopener">Peter N Robinson, Enock Niyonkuru</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.code.select"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>