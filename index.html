<!DOCTYPE html>
<html>
<head>
    <title>Ranked Triplets with MeSH Information</title>
    <style>
        .collapsible {
            background-color: #f1f1f1;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
        }

        .active, .collapsible:hover {
            background-color: #ccc;
        }

        .content, .text-content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h2>Ranked Triplets with MeSH Information</h2>
    <div id="tripletsContainer">
        <!-- Collapsible panels will be added here -->
    </div>

    <script>
        fetch('data/sickle_cell/post_ontoGPT.json')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('tripletsContainer');
                data.ranked_triplets.forEach(tripletInfo => {
                    const button = document.createElement('button');
                    button.classList.add('collapsible');
                    button.innerText = tripletInfo.triplet.slice(0, 3).join(' | '); // Only display the first three elements of the triplet
                    container.appendChild(button);

                    const contentDiv = document.createElement('div');
                    contentDiv.classList.add('content');

                    let contentHtml = `<p>Count: ${tripletInfo.count}</p>`;
                    Object.entries(tripletInfo.pubmed_ids_mesh_info).forEach(([pmid, info]) => {
                        contentHtml += `<button class="collapsible">${pmid} | MeSH Info: ${JSON.stringify(info.mesh_info)}</button>`;
                        contentHtml += `<div class="text-content">${info.text}</div>`;
                    });
                    contentDiv.innerHTML = contentHtml;
                    container.appendChild(contentDiv);

                    button.addEventListener('click', function() {
                        this.classList.toggle('active');
                        const content = this.nextElementSibling;
                        if (content.style.display === 'block') {
                            content.style.display = 'none';
                        } else {
                            content.style.display = 'block';
                        }
                    });
                });

                const pmidButtons = document.querySelectorAll('.content .collapsible');
                pmidButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        this.classList.toggle('active');
                        const textContent = this.nextElementSibling;
                        if (textContent.style.display === 'block') {
                            textContent.style.display = 'none';
                        } else {
                            textContent.style.display = 'block';
                        }
                    });
                });
            });
    </script>
</body>
</html>
